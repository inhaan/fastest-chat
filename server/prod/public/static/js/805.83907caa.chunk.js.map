{"version":3,"file":"static/js/805.83907caa.chunk.js","mappings":"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","sources":["img/chat.svg","hook/useCssVar.ts","component/ChatBackground.tsx","component/ChatBox.tsx","component/ChatContainer.tsx","component/ChatFooter.tsx","component/Badge.tsx","component/ChatHeader.tsx","hook/useWindowSize.ts","component/ChatEditor.tsx","hook/useDevice.ts","component/ChatMain.tsx","store/chatReducer.ts","component/ChatMessages.tsx","component/ChatMembers.tsx","hook/useChatConnect.ts","webSocket/messageHandler.ts","webSocket/listen/clients.ts","webSocket/listen/join.ts","webSocket/listen/leave.ts","webSocket/listen/message.ts","page/Chat.tsx","hook/useChatStore.ts","api/checkNickname.ts","store/chatDB.ts"],"sourcesContent":["var _path, _linearGradient, _path2, _path3, _circle, _circle2, _circle3;\nvar _excluded = [\"title\", \"titleId\"];\nfunction _extends() { _extends = Object.assign ? Object.assign.bind() : function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\nimport * as React from \"react\";\nfunction SvgChat(_ref, svgRef) {\n  var title = _ref.title,\n    titleId = _ref.titleId,\n    props = _objectWithoutProperties(_ref, _excluded);\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    xmlns: \"http://www.w3.org/2000/svg\",\n    width: 400,\n    height: 400,\n    id: \"chat\",\n    ref: svgRef,\n    \"aria-labelledby\": titleId\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: titleId\n  }, title) : null, _path || (_path = /*#__PURE__*/React.createElement(\"path\", {\n    fill: \"#2A94F4\",\n    d: \"M261.037 297.928c-6.253 6.731-13.381 12.81-21.212 18.095-21.628 14.653-48.694 23.35-78.082 23.35-20.519 0-39.907-4.236-57.086-11.782C80.3 352.407 41.39 350.147 41.39 350.147l30.59-43.054c-23.747-20.488-38.472-49.03-38.472-80.618 0-28.095 11.649-53.787 30.926-73.542 6.822-6.985 14.603-13.238 23.156-18.584-5.194 13.075-8.024 27.127-8.024 41.76 0 69.764 64.234 126.31 143.458 126.31 13.166 0 25.905-1.558 38.013-4.491z\"\n  })), _linearGradient || (_linearGradient = /*#__PURE__*/React.createElement(\"linearGradient\", {\n    id: \"a\",\n    x1: 184.772,\n    x2: 184.772,\n    y1: 113.576,\n    y2: 302.419,\n    gradientUnits: \"userSpaceOnUse\"\n  }, /*#__PURE__*/React.createElement(\"stop\", {\n    offset: 0.394,\n    stopColor: \"#80e8be\"\n  }), /*#__PURE__*/React.createElement(\"stop\", {\n    offset: 1,\n    stopColor: \"#00c278\"\n  }))), _path2 || (_path2 = /*#__PURE__*/React.createElement(\"path\", {\n    fill: \"url(#a)\",\n    d: \"M289.977 226.475c0 27.117-10.845 51.995-28.939 71.454-12.108 2.933-24.847 4.491-38.013 4.491-79.224 0-143.458-56.546-143.458-126.31 0-14.632 2.83-28.685 8.024-41.76 20.936-13.075 46.516-20.773 74.152-20.773 70.822-.001 128.234 50.537 128.234 112.898z\"\n  })), _path3 || (_path3 = /*#__PURE__*/React.createElement(\"path\", {\n    fill: \"#CCE9FF\",\n    d: \"m323.458 266.3 34.226 48.175s-43.543 2.525-70.782-25.233a155.02 155.02 0 0 1-25.864 8.686c-12.108 2.933-24.847 4.491-38.013 4.491-79.224 0-143.458-56.546-143.458-126.31 0-14.632 2.83-28.685 8.024-41.76C107.172 85.104 160.419 49.8 223.024 49.8c79.232 0 143.467 56.536 143.467 126.309 0 35.336-16.466 67.27-43.033 90.191z\"\n  })), _circle || (_circle = /*#__PURE__*/React.createElement(\"circle\", {\n    cx: 169.462,\n    cy: 183.78,\n    r: 20.53,\n    fill: \"#2A94F4\"\n  })), _circle2 || (_circle2 = /*#__PURE__*/React.createElement(\"circle\", {\n    cx: 225.065,\n    cy: 183.78,\n    r: 20.53,\n    fill: \"#2A94F4\"\n  })), _circle3 || (_circle3 = /*#__PURE__*/React.createElement(\"circle\", {\n    cx: 280.669,\n    cy: 183.78,\n    r: 20.53,\n    fill: \"#2A94F4\"\n  })));\n}\nvar ForwardRef = /*#__PURE__*/React.forwardRef(SvgChat);\nexport default __webpack_public_path__ + \"static/media/chat.70046fe1a2ac3456d42dfc650b4ffa12.svg\";\nexport { ForwardRef as ReactComponent };","import { useLayoutEffect } from \"react\";\n\nexport const useCssVar = () => {\n  // 모바일에서 키보드가 올라오면 뷰포트가 줄어들어서 레이아웃이 깨지는 현상을 방지하기 위해\n  useLayoutEffect(() => {\n    const vh = window.innerHeight * 0.01;\n    document.documentElement.style.setProperty(\"--vh\", `${vh}px`);\n  }, []);\n};\n","import { PropsWithChildren, memo } from \"react\";\n\nexport const ChatBackground = memo(({ children }: PropsWithChildren) => {\n  return (\n    <div\n      className=\"flex justify-center sm:p-10 bg-neutral-200\"\n      style={{ height: \"calc(var(--vh, 1vh) * 100)\" }}\n    >\n      {children}\n    </div>\n  );\n});\n","import { PropsWithChildren, memo } from \"react\";\n\nexport const ChatBox = memo(({ children }: PropsWithChildren) => {\n  return (\n    <div className=\"flex-1 flex flex-col bg-white overflow-hidden sm:rounded-xl shadow-2xl\">\n      {children}\n    </div>\n  );\n});\n","import { PropsWithChildren, memo } from \"react\";\n\nexport const ChatContainer = memo(({ children }: PropsWithChildren) => {\n  return <div className=\"flex flex-col w-full max-w-5xl\">{children}</div>;\n});\n","import { memo } from \"react\";\n\nexport const ChatFooter = memo(() => {\n  return (\n    <footer className=\"w-full pt-5 text-xs text-right text-gray-400\">\n      <div>\n        <i>© 2023 </i>\n        <i>developed by inhan</i>\n      </div>\n      <a\n        href=\"https://iconscout.com/icons/chat\"\n        target=\"_blank\"\n        rel=\"noreferrer\"\n      >\n        Free Chat Icon\n      </a>\n      by\n      <a href=\"https://iconscout.com/contributors/delesign\">\n        Delesign Graphics\n      </a>\n      on <a href=\"https://iconscout.com\">IconScout</a>\n    </footer>\n  );\n});\n","import { PropsWithChildren, memo } from \"react\";\n\nexport const Badge = memo(({ children }: PropsWithChildren) => {\n  return (\n    <div className=\"flex justify-center absolute items-center top-0 right-0 p-1 min-w-[1.25rem] h-5 text-xs text-white bg-red-500 rounded-full translate-x-1 -translate-y-1\">\n      {children}\n    </div>\n  );\n});\n","import { memo, useCallback, useMemo } from \"react\";\nimport { BiExit } from \"react-icons/bi\";\nimport { BsPeopleFill } from \"react-icons/bs\";\nimport imgChat from \"../img/chat.svg\";\nimport { Badge } from \"./Badge\";\n\ninterface IChatHeaderProps {\n  title: string;\n  memberCount: number;\n  isOpenMembers: boolean;\n  toggleOpenMembers: () => void;\n  onLeave: () => void;\n}\n\nexport const ChatHeader = memo(\n  ({\n    title,\n    memberCount,\n    isOpenMembers,\n    toggleOpenMembers,\n    onLeave,\n  }: IChatHeaderProps) => {\n    const membersStyle = useMemo(() => {\n      return isOpenMembers\n        ? \"bg-sky-400 hover:bg-sky-500 active:bg-sky-600\"\n        : \"bg-slate-200 hover:bg-slate-300 active:bg-slate-400\";\n    }, [isOpenMembers]);\n\n    const onClickLeave = useCallback(() => {\n      if (window.confirm(\"채팅방을 나가시겠습니까?\")) {\n        onLeave();\n      }\n    }, [onLeave]);\n\n    return (\n      <header className=\"relative flex justify-between p-5 bg-neutral-50 shadow-sm\">\n        <div className=\"flex items-center gap-4\">\n          <img src={imgChat} alt=\"chat\" className=\"w-9 h-9\" />\n          <h1 className=\"font-bold text-lg sm:text-xl break-all\">{title}</h1>\n        </div>\n\n        <div className=\"flex gap-3 items-center\">\n          <button\n            title=\"참가자\"\n            className={`relative p-2.5 rounded-full opacity-80  transition-all ${membersStyle}`}\n            onClick={toggleOpenMembers}\n          >\n            <BsPeopleFill className=\"text-xl text-slate-600\" />\n            <Badge>{memberCount}</Badge>\n          </button>\n\n          <button\n            title=\"나가기\"\n            className=\"p-2.5 rounded-full bg-slate-200 opacity-80 hover:bg-slate-300 active:bg-slate-400 transition-all\"\n            onClick={onClickLeave}\n          >\n            <BiExit className=\"text-xl text-slate-600\" />\n          </button>\n        </div>\n      </header>\n    );\n  }\n);\n","import { useState, useLayoutEffect } from \"react\";\n\nexport const useWindowSize = () => {\n  const [size, setSize] = useState({\n    width: window.innerWidth,\n    height: window.innerHeight,\n  });\n\n  useLayoutEffect(() => {\n    const handleResize = () => {\n      setSize({\n        width: window.innerWidth,\n        height: window.innerHeight,\n      });\n    };\n    window.addEventListener(\"resize\", handleResize);\n\n    return () => window.removeEventListener(\"resize\", handleResize);\n  }, []);\n\n  return {\n    width: size.width,\n    height: size.height,\n    isSmall: size.width < 640,\n  };\n};\n","import _ from \"lodash\";\nimport { useState, useMemo, useRef, memo, useCallback } from \"react\";\nimport TextareaAutosize from \"react-textarea-autosize\";\nimport { PiPaperPlaneRightFill } from \"react-icons/pi\";\nimport { useWindowSize } from \"../hook/useWindowSize\";\nimport { useDevice } from \"../hook/useDevice\";\n\ninterface IChatEditorProps {\n  disabled?: boolean;\n  onSend: (content: string) => void;\n}\n\nexport const ChatEditor = memo(({ disabled, onSend }: IChatEditorProps) => {\n  const [content, setContent] = useState(\"\");\n  const { isSmall } = useWindowSize();\n  const { isDesktop } = useDevice();\n  const editorRef = useRef<HTMLTextAreaElement>(null);\n\n  const sendStyle = useMemo(() => {\n    return content ? \"text-rose-400\" : \"text-gray-400\";\n  }, [content]);\n\n  const sendContent = useMemo(() => {\n    return _.throttle((content: string) => {\n      if (content) {\n        onSend(content);\n        setContent(\"\");\n      }\n    }, 500);\n  }, [onSend]);\n\n  const onChange = useCallback((e: React.ChangeEvent<HTMLTextAreaElement>) => {\n    setContent(e.target.value);\n  }, []);\n\n  const onKeyDown = useCallback(\n    (e: React.KeyboardEvent<HTMLTextAreaElement>) => {\n      if (e.key === \"Enter\" && !e.shiftKey && isDesktop) {\n        e.preventDefault();\n        sendContent(content);\n      }\n    },\n    [content, isDesktop, sendContent]\n  );\n\n  const onClick = useCallback(() => {\n    sendContent(content);\n    editorRef.current?.focus();\n  }, [content, sendContent]);\n\n  return (\n    <>\n      <div className=\"relative\">\n        <TextareaAutosize\n          ref={editorRef}\n          className=\"w-full resize-none outline-none p-3 sm:p-5 transition-all\"\n          minRows={isSmall ? 1 : 2}\n          maxRows={8}\n          autoFocus\n          placeholder=\"대화를 입력하세요\"\n          disabled={disabled}\n          value={content}\n          onChange={onChange}\n          onKeyDown={onKeyDown}\n        />\n        <div className=\"absolute bottom-0 right-0 p-5\">\n          <PiPaperPlaneRightFill\n            className={`text-2xl transition-all cursor-pointer ${sendStyle}`}\n            onClick={onClick}\n          />\n        </div>\n      </div>\n    </>\n  );\n});\n","import { useMemo } from \"react\";\n\nexport const useDevice = () => {\n  const isMobile = useMemo(() => {\n    return /iPhone|iPad|iPod|Android|webOS|BlackBerry|Windows Phone/i.test(\n      navigator.userAgent\n    );\n  }, []);\n\n  const isDesktop = useMemo(() => {\n    return !isMobile;\n  }, [isMobile]);\n\n  return {\n    isMobile,\n    isDesktop,\n  };\n};\n","import { PropsWithChildren, memo } from \"react\";\n\ninterface IChatMainProps extends PropsWithChildren {\n  className?: string;\n}\n\nexport const ChatMain = memo(({ children, className }: IChatMainProps) => {\n  return <main className={`flex flex-col ${className}`}>{children}</main>;\n});\n","import shortUUID from \"short-uuid\";\nimport { IMember, IMessage } from \"../type/chatType\";\n\ninterface IChatState {\n  myNickname: string | null;\n  messages: IMessage[];\n  members: IMember[];\n}\n\ninterface IChatSetMyNicknameAction {\n  type: \"CHAT_SET_MY_NICKNAME\";\n  payload: string;\n}\n\ninterface IChatInitMessagesAction {\n  type: \"CHAT_INIT_MESSAGES\";\n  payload: IMessage[];\n}\n\ninterface IChatAddMessageAction {\n  type: \"CHAT_ADD_MESSAGE\";\n  payload: IMessage;\n}\n\ninterface ICHatSetMembersAction {\n  type: \"CHAT_SET_MEMBERS\";\n  payload: IMember[];\n}\n\ninterface IChatAddMemberAction {\n  type: \"CHAT_ADD_MEMBER\";\n  payload: IMember;\n}\n\ninterface IChatJoinMemberAction {\n  type: \"CHAT_JOIN_MEMBER\";\n  payload: IMember;\n}\n\ninterface IChatLeaveMemberAction {\n  type: \"CHAT_LEAVE_MEMBER\";\n  payload: IMember;\n}\n\nexport type IChatAction =\n  | IChatInitMessagesAction\n  | IChatAddMessageAction\n  | IChatAddMemberAction\n  | IChatSetMyNicknameAction\n  | ICHatSetMembersAction\n  | IChatJoinMemberAction\n  | IChatLeaveMemberAction;\n\nexport const initialChatState: IChatState = {\n  myNickname: \"\",\n  messages: [],\n  members: [],\n};\n\nexport const chatReducer = (\n  state: IChatState,\n  action: IChatAction\n): IChatState => {\n  switch (action.type) {\n    case \"CHAT_INIT_MESSAGES\":\n      return {\n        ...state,\n        messages: action.payload,\n      };\n    case \"CHAT_ADD_MESSAGE\":\n      return {\n        ...state,\n        messages: [...state.messages, action.payload],\n      };\n    case \"CHAT_SET_MEMBERS\":\n      return {\n        ...state,\n        members: action.payload,\n      };\n    case \"CHAT_ADD_MEMBER\":\n      return {\n        ...state,\n        members: [...state.members, action.payload],\n      };\n    case \"CHAT_SET_MY_NICKNAME\":\n      return {\n        ...state,\n        myNickname: action.payload,\n      };\n    case \"CHAT_JOIN_MEMBER\":\n      return {\n        ...state,\n        messages: [\n          ...state.messages,\n          {\n            type: \"join\",\n            id: shortUUID.generate(),\n            ...action.payload,\n            timestamp: Date.now(),\n          },\n        ],\n      };\n    case \"CHAT_LEAVE_MEMBER\":\n      return {\n        ...state,\n        messages: [\n          ...state.messages,\n          {\n            type: \"leave\",\n            id: shortUUID.generate(),\n            ...action.payload,\n            timestamp: Date.now(),\n          },\n        ],\n      };\n    default:\n      return state;\n  }\n};\n\nexport const createMessage = (\n  message: Omit<IMessage, \"id\" | \"timestamp\" | \"type\">\n): IMessage => ({\n  type: \"message\",\n  id: shortUUID.generate(),\n  ...message,\n  timestamp: Date.now(),\n});\n","import _ from \"lodash\";\nimport {\n  forwardRef,\n  useImperativeHandle,\n  useRef,\n  ReactNode,\n  memo,\n  useMemo,\n} from \"react\";\nimport dayjs from \"dayjs\";\nimport { BsCheckAll } from \"react-icons/bs\";\nimport { IMessage } from \"../type/chatType\";\n\ninterface IChatMessagesProps {\n  messages: IMessage[];\n  myNickname: string | null;\n}\n\nexport interface IChatMessagesRef {\n  scrollToBottom: () => void;\n}\n\nexport const ChatMessages = memo(\n  forwardRef<IChatMessagesRef, IChatMessagesProps>(\n    ({ messages, myNickname }, ref) => {\n      const messagesRef = useRef<HTMLUListElement>(null);\n      const sortedMessages = useMemo(() => {\n        return _.sortBy(messages, \"timestamp\");\n      }, [messages]);\n\n      useImperativeHandle(ref, () => ({\n        scrollToBottom: () => {\n          messagesRef.current?.scrollTo({\n            top: messagesRef.current.scrollHeight,\n            behavior: \"smooth\",\n          });\n        },\n      }));\n\n      let prevDate = \"\";\n      let prevMessage: IMessage | null = null;\n\n      return (\n        <ul\n          ref={messagesRef}\n          className=\"flex flex-col-reverse h-full gap-2 p-5 overflow-auto\"\n        >\n          {sortedMessages\n            .reduce<ReactNode[]>((acc, message) => {\n              const isMine = message.nickname === myNickname;\n              const date = dayjs(message.timestamp).format(\"YYYY.MM.DD (ddd)\");\n\n              // 날짜 표시\n              if (prevDate !== date) {\n                prevDate = date;\n                acc.push(<ChatDateMessage key={date} date={date} />);\n              }\n\n              // 멤버 입퇴장 표시\n              if (message.type === \"join\" || message.type === \"leave\") {\n                acc.push(\n                  <ChatMemberMessage key={message.id} message={message} />\n                );\n                return acc;\n              }\n\n              // 연결메세지 (이전 메시지와 같은 사용자의 메시지이며 1분 이내의 메시지)\n              if (\n                prevMessage &&\n                prevMessage.nickname === message.nickname &&\n                Math.abs(dayjs(prevMessage.timestamp).diff(message.timestamp)) <\n                  1000 * 60\n              ) {\n                acc.push(\n                  <ChatMessage\n                    key={message.id}\n                    message={message}\n                    isMine={isMine}\n                    contentOnly\n                  />\n                );\n                return acc;\n              }\n\n              // 새 메시지\n              prevMessage = message;\n              acc.push(\n                <ChatMessage\n                  key={message.id}\n                  message={message}\n                  isMine={isMine}\n                />\n              );\n              return acc;\n            }, [])\n            .reverse()}\n        </ul>\n      );\n    }\n  )\n);\n\nconst ChatDateMessage = memo(({ date }: { date: string }) => {\n  return (\n    <div className=\"flex justify-center items-center text-gray-400 px-1 pt-2\">\n      <BsCheckAll className=\"inline-block text-lg mr-1 text-green-500\" />\n      <span className=\"text-sm\">{date}</span>\n    </div>\n  );\n});\n\ninterface IChatMessageProps {\n  message: IMessage;\n  isMine: boolean;\n  contentOnly?: boolean;\n}\nexport const ChatMessage = memo(\n  ({ message, isMine, contentOnly }: IChatMessageProps) => {\n    const myMessageStyle = useMemo(() => {\n      return isMine ? \"self-end items-end\" : \"self-start items-start\";\n    }, [isMine]);\n\n    const myMessageContentStyle = useMemo(() => {\n      return isMine ? \"bg-blue-500 text-white\" : \"bg-white\";\n    }, [isMine]);\n\n    const contentOnlyStyle = useMemo(() => {\n      return contentOnly ? \"\" : \"pt-1\";\n    }, [contentOnly]);\n\n    return (\n      <li\n        key={message.id}\n        className={`flex flex-col gap-1 px-1 ${contentOnlyStyle} ${myMessageStyle}`}\n      >\n        {!contentOnly && (\n          <div className=\"flex gap-2 px-2 pt-1 items-center\">\n            <div className=\"font-bold text-sm\">{message.nickname}</div>\n            <div className=\"text-sm text-gray-400\">\n              {dayjs(message.timestamp).format(\"hh:mm A\")}\n            </div>\n          </div>\n        )}\n        <div\n          className={`rounded-xl inline-block py-2 px-3 w-fit max-w-lg whitespace-pre-line ${myMessageContentStyle}`}\n        >\n          {message.content}\n        </div>\n      </li>\n    );\n  }\n);\n\nexport const ChatMemberMessage = memo(({ message }: { message: IMessage }) => {\n  const enterOrLeave = useMemo(() => {\n    return message.type === \"join\" ? \"입장\" : \"퇴장\";\n  }, [message.type]);\n\n  return (\n    <li className=\"text-center text-sm text-gray-500 my-2\">\n      <span className=\"text-base\">☁️</span> {message.nickname} 님이{\" \"}\n      {enterOrLeave}\n      하셨습니다.\n    </li>\n  );\n});\n","import { memo, useMemo } from \"react\";\nimport Gravatar from \"react-gravatar\";\nimport { IMember } from \"../type/chatType\";\n\ninterface IChatMembersProps {\n  members: IMember[];\n  myNickname: string | null;\n}\n\nexport const ChatMembers = memo(\n  ({ members, myNickname }: IChatMembersProps) => {\n    const shortedMembers = useMemo(() => {\n      return [\n        ...members.filter((member) => member.nickname === myNickname),\n        ...members.filter((member) => member.nickname !== myNickname),\n      ];\n    }, [members, myNickname]);\n\n    return (\n      <ul className=\"flex flex-col gap-3 py-6 px-3\">\n        {shortedMembers.map((member) => {\n          return (\n            <ChatMember\n              key={member.nickname}\n              member={member}\n              isMe={member.nickname === myNickname}\n            />\n          );\n        })}\n      </ul>\n    );\n  }\n);\n\ninterface IChatMemberProps {\n  member: IMember;\n  isMe: boolean;\n}\nconst ChatMember = memo(({ member, isMe }: IChatMemberProps) => {\n  const meStyle = useMemo(() => {\n    return isMe ? \"bg-slate-400 rounded-lg\" : \"\";\n  }, [isMe]);\n\n  return (\n    <li className={`flex p-3 gap-3 text-white ${meStyle}`}>\n      <Gravatar\n        email={member.nickname}\n        size={40}\n        default=\"mp\"\n        className=\"rounded-lg\"\n      />\n      <div\n        title={member.nickname}\n        className=\"flex items-center whitespace-nowrap overflow-hidden text-ellipsis\"\n      >\n        {member.nickname}\n      </div>\n    </li>\n  );\n});\n","import { useRef, useCallback, useLayoutEffect } from \"react\";\nimport { IWebSocketMessage } from \"../type/webSocketType\";\n\ninterface IChatConnection {\n  chatRoomId: string;\n  nickname: string;\n  ws: WebSocket;\n  close: () => void;\n  cancel: () => void;\n  isSame: (compare: { chatRoomId: string; nickname: string }) => boolean;\n  isClosed: () => boolean;\n}\n\nexport const useChatConnection = (\n  chatRoomId?: string,\n  nickname?: string | null\n) => {\n  const connectionRef = useRef<IChatConnection | null>(null);\n  const messageHandlerRef = useRef<(message: IWebSocketMessage) => void>();\n\n  useLayoutEffect(() => {\n    if (!chatRoomId || !nickname) {\n      return;\n    }\n    if (\n      connectionRef.current?.isSame({ chatRoomId, nickname }) &&\n      !connectionRef.current?.isClosed()\n    ) {\n      connectionRef.current?.cancel();\n      return;\n    }\n\n    const host =\n      process.env.NODE_ENV === \"development\"\n        ? process.env.REACT_APP_HOST\n        : window.location.host;\n    const protocol = window.location.protocol === \"https:\" ? \"wss:\" : \"ws:\";\n    const socketUrl = `${protocol}//${host}/chat/${chatRoomId}?nickname=${nickname}`;\n    const ws = new WebSocket(socketUrl);\n    connectionRef.current = createChatConnection(chatRoomId, nickname, ws);\n\n    if (messageHandlerRef.current) {\n      connectionRef.current.ws.onmessage = (event) => {\n        const message = JSON.parse(event.data);\n        messageHandlerRef.current?.(message);\n      };\n    }\n\n    return () => {\n      connectionRef.current?.close();\n    };\n  }, [chatRoomId, nickname]);\n\n  const registMessageHandler = useCallback(\n    (handleMessage: (message: IWebSocketMessage) => void) => {\n      messageHandlerRef.current = handleMessage;\n    },\n    []\n  );\n\n  const sendMessage = useCallback((message: string) => {\n    connectionRef.current?.ws.send(message);\n  }, []);\n\n  const leave = useCallback(() => {\n    connectionRef.current?.close();\n  }, []);\n\n  return {\n    connection: connectionRef.current,\n    sendMessage,\n    leave,\n    registMessageHandler,\n  };\n};\n\nconst createChatConnection = (\n  chatRoomId: string,\n  nickname: string,\n  ws: WebSocket\n): IChatConnection => {\n  let timer: NodeJS.Timeout;\n\n  // 웹소켓 연결이 열렸을 때 실행되는 함수\n  ws.onopen = () => {\n    console.log(\"Connected to the chat server\");\n  };\n\n  // 웹소켓 연결이 닫혔을 때 실행되는 함수\n  ws.onclose = () => {\n    console.log(\"Disconnected from the chat server\");\n  };\n\n  const close = () => {\n    timer = setTimeout(() => {\n      ws.close();\n    }, 100);\n  };\n\n  const cancel = () => {\n    clearTimeout(timer);\n  };\n\n  const isSame = (compare: { chatRoomId: string; nickname: string }) => {\n    return chatRoomId === compare.chatRoomId && nickname === compare.nickname;\n  };\n\n  const isClosed = () => {\n    return (\n      ws.readyState === WebSocket.CLOSED || ws.readyState === WebSocket.CLOSING\n    );\n  };\n\n  return {\n    chatRoomId,\n    nickname,\n    ws,\n    close,\n    cancel,\n    isSame,\n    isClosed,\n  };\n};\n","import { IChatAction } from \"../store/chatReducer\";\nimport { IWebSocketMessage } from \"../type/webSocketType\";\nimport { onClients } from \"./listen/clients\";\nimport { onJoin } from \"./listen/join\";\nimport { onLeave } from \"./listen/leave\";\nimport { onMessage } from \"./listen/message\";\n\nexport const onWebSocketMessage = (\n  webSocketMessage: IWebSocketMessage,\n  dispatch: React.Dispatch<IChatAction>\n) => {\n  switch (webSocketMessage.type) {\n    case \"clients\":\n      onClients(webSocketMessage, dispatch);\n      break;\n    case \"join\":\n      onJoin(webSocketMessage, dispatch);\n      break;\n    case \"leave\":\n      onLeave(webSocketMessage, dispatch);\n      break;\n    case \"message\":\n      onMessage(webSocketMessage, dispatch);\n      break;\n    default:\n      break;\n  }\n};\n","import { IChatAction } from \"../../store/chatReducer\";\nimport { IWebSocketMessage } from \"../../type/webSocketType\";\n\nexport const onClients = (\n  webSocketMessage: IWebSocketMessage,\n  dispatch: React.Dispatch<IChatAction>\n) => {\n  dispatch({\n    type: \"CHAT_SET_MEMBERS\",\n    payload: webSocketMessage.clients,\n  });\n};\n","import { IChatAction } from \"../../store/chatReducer\";\nimport { IWebSocketMessage } from \"../../type/webSocketType\";\n\nexport const onJoin = (\n  webSocketMessage: IWebSocketMessage,\n  dispatch: React.Dispatch<IChatAction>\n) => {\n  dispatch({\n    type: \"CHAT_JOIN_MEMBER\",\n    payload: {\n      nickname: webSocketMessage.nickname,\n    },\n  });\n\n  dispatch({\n    type: \"CHAT_SET_MEMBERS\",\n    payload: webSocketMessage.clients,\n  });\n};\n","import { IChatAction } from \"../../store/chatReducer\";\nimport { IWebSocketMessage } from \"../../type/webSocketType\";\n\nexport const onLeave = (\n  webSocketMessage: IWebSocketMessage,\n  dispatch: React.Dispatch<IChatAction>\n) => {\n  dispatch({\n    type: \"CHAT_LEAVE_MEMBER\",\n    payload: {\n      nickname: webSocketMessage.nickname,\n    },\n  });\n\n  dispatch({\n    type: \"CHAT_SET_MEMBERS\",\n    payload: webSocketMessage.clients,\n  });\n};\n","import { IChatAction, createMessage } from \"../../store/chatReducer\";\nimport { IWebSocketMessage } from \"../../type/webSocketType\";\n\nexport const onMessage = (\n  webSocketMessage: IWebSocketMessage,\n  dispatch: React.Dispatch<IChatAction>\n) => {\n  const message = createMessage({\n    nickname: webSocketMessage.nickname,\n    content: webSocketMessage.message,\n  });\n\n  dispatch({\n    type: \"CHAT_ADD_MESSAGE\",\n    payload: message,\n  });\n};\n","import { useState, useRef, useCallback, useEffect, memo, useMemo } from \"react\";\nimport { useNavigate, useParams } from \"react-router-dom\";\nimport { ChatBackground } from \"../component/ChatBackground\";\nimport { ChatBox } from \"../component/ChatBox\";\nimport { ChatContainer } from \"../component/ChatContainer\";\nimport { ChatFooter } from \"../component/ChatFooter\";\nimport { ChatHeader } from \"../component/ChatHeader\";\nimport { useWindowSize } from \"../hook/useWindowSize\";\nimport { ChatEditor } from \"../component/ChatEditor\";\nimport { ChatMain } from \"../component/ChatMain\";\nimport { useChatStore } from \"../hook/useChatStore\";\nimport { ChatMessages, IChatMessagesRef } from \"../component/ChatMessages\";\nimport { ChatMembers } from \"../component/ChatMembers\";\nimport { useChatConnection } from \"../hook/useChatConnect\";\nimport { onWebSocketMessage } from \"../webSocket/messageHandler\";\nimport { useCssVar } from \"../hook/useCssVar\";\nimport { createMessage } from \"../store/chatReducer\";\nimport { checkNicknameAsync } from \"../api/checkNickname\";\n\nconst Chat = memo(() => {\n  useCssVar();\n  const { roomId } = useParams<{ roomId: string }>();\n  const { isSmall } = useWindowSize();\n  const navigate = useNavigate();\n  const chatMessageRef = useRef<IChatMessagesRef>(null);\n  const containerRef = useRef<HTMLDivElement>(null);\n  const [isOpenMembers, setIsOpenMembers] = useState(isSmall ? false : true);\n  const { messages, members, myNickname, dispatch } = useChatStore(roomId);\n  const { sendMessage, leave, registMessageHandler } = useChatConnection(\n    roomId,\n    myNickname\n  );\n  registMessageHandler((message) => {\n    onWebSocketMessage(message, dispatch);\n  });\n\n  const chatMainStyle = useMemo(() => {\n    return isOpenMembers ? \"flex-1\" : \"flex-1\";\n  }, [isOpenMembers]);\n\n  const membersStyle = useMemo(() => {\n    return isOpenMembers ? \"w-full sm:w-72\" : \"w-0\";\n  }, [isOpenMembers]);\n\n  const toggleOpenMembers = useCallback(() => {\n    setIsOpenMembers((prev) => !prev);\n  }, []);\n\n  const onSendMessage = useCallback(\n    (content: string) => {\n      if (!myNickname) {\n        return;\n      }\n      sendMessage(content);\n\n      const message = createMessage({\n        content,\n        nickname: myNickname,\n      });\n      dispatch({\n        type: \"CHAT_ADD_MESSAGE\",\n        payload: message,\n      });\n    },\n    [sendMessage, dispatch, myNickname]\n  );\n\n  const onLeave = useCallback(() => {\n    leave();\n    navigate(\"/\");\n  }, [leave, navigate]);\n\n  // 사용자에게 닉네임 입력 받기\n  useEffect(() => {\n    if (myNickname || !roomId) {\n      return;\n    }\n    const nickname = prompt(\"닉네임을 입력해 주세요\");\n    if (!nickname) {\n      alert(\"닉네임은 필수 입력입니다\");\n      navigate(\"/\");\n      return;\n    }\n\n    checkNicknameAsync(roomId, nickname).then((available) => {\n      if (!available) {\n        alert(\"이미 사용중인 닉네임입니다\");\n        navigate(\"/\");\n      } else {\n        dispatch({ type: \"CHAT_SET_MY_NICKNAME\", payload: nickname });\n      }\n    });\n  }, []);\n\n  // 메세지가 추가될 때마다 스크롤을 맨 아래로 이동\n  useEffect(() => {\n    chatMessageRef.current?.scrollToBottom();\n    containerRef.current?.scrollIntoView({ block: \"end\" });\n  }, [messages]);\n\n  return (\n    <ChatBackground>\n      <ChatContainer>\n        <ChatBox>\n          <ChatHeader\n            title={roomId ?? \"\"}\n            memberCount={members.length}\n            isOpenMembers={isOpenMembers}\n            toggleOpenMembers={toggleOpenMembers}\n            onLeave={onLeave}\n          />\n          <div\n            ref={containerRef}\n            className=\"relative flex-1 flex bg-slate-100 h-1\"\n          >\n            <ChatMain className={chatMainStyle}>\n              <section className=\"flex-1 h-1\">\n                <ChatMessages\n                  ref={chatMessageRef}\n                  messages={messages}\n                  myNickname={myNickname}\n                />\n              </section>\n              <section className=\"bg-white\">\n                <ChatEditor\n                  disabled={!myNickname ? true : false}\n                  onSend={onSendMessage}\n                />\n              </section>\n            </ChatMain>\n            <aside\n              className={`${membersStyle} absolute right-0 sm:relative h-full bg-slate-500 transition-all overflow-auto`}\n            >\n              <ChatMembers members={members} myNickname={myNickname} />\n            </aside>\n          </div>\n        </ChatBox>\n        {!isSmall && <ChatFooter />}\n      </ChatContainer>\n    </ChatBackground>\n  );\n});\n\nexport default Chat;\n","import { useReducer, useLayoutEffect, useCallback } from \"react\";\nimport {\n  IChatAction,\n  chatReducer,\n  initialChatState,\n} from \"../store/chatReducer\";\nimport { chatDB } from \"../store/chatDB\";\n\nexport const useChatStore = (roomId?: string) => {\n  const [{ messages, members, myNickname }, dispatch] = useReducer(\n    chatReducer,\n    initialChatState\n  );\n\n  const dispatchMiddleware = useCallback(\n    (action: IChatAction) => {\n      if (roomId) {\n        switch (action.type) {\n          case \"CHAT_ADD_MESSAGE\":\n            chatDB.saveMessages(roomId, [...messages, action.payload]);\n            break;\n        }\n      }\n      dispatch(action);\n    },\n    [roomId, messages]\n  );\n\n  useLayoutEffect(() => {\n    if (roomId) {\n      chatDB.getMessagesByRoomId(roomId).then((messages) => {\n        dispatch({\n          type: \"CHAT_INIT_MESSAGES\",\n          payload: messages,\n        });\n      });\n    }\n  }, [roomId]);\n\n  return {\n    messages,\n    members,\n    myNickname,\n    dispatch: dispatchMiddleware,\n  };\n};\n","export const checkNicknameAsync = (\n  chatRoomId: string,\n  nickname: string\n): Promise<boolean> => {\n  return fetch(\n    `/api/chat-rooms/${chatRoomId}/check-nickname?nickname=${nickname}`\n  )\n    .then((response) => response.json())\n    .then((data) => {\n      return data.available;\n    })\n    .catch((error) => {\n      console.error(\"Failed to check nickname availability:\", error);\n      return false;\n    });\n};\n","import _ from \"lodash\";\nimport { IChatRoom, IMessage } from \"../type/chatType\";\n\n// IndexedDB 초기화\nconst openDB = (): Promise<IDBDatabase> => {\n  return new Promise((resolve, reject) => {\n    const request = window.indexedDB.open(\"ChatDB\", 1);\n\n    request.onerror = (event) => {\n      console.error(\"IndexedDB에 접근하는 동안 오류가 발생했습니다.\");\n      reject(\"오류\");\n    };\n\n    request.onsuccess = (event: any) => {\n      const db = event.target.result as IDBDatabase;\n      resolve(db);\n    };\n\n    request.onupgradeneeded = (event: any) => {\n      const db = event.target.result as IDBDatabase;\n      const objectStore = db.createObjectStore(\"Chats\", { keyPath: \"roomId\" });\n      objectStore.createIndex(\"roomId\", \"roomId\", { unique: true });\n    };\n  });\n};\n\n// 여러 메시지 한꺼번에 저장\nconst saveMessages = async (\n  roomId: string,\n  messages: IMessage[]\n): Promise<void> => {\n  const db = await openDB();\n  return new Promise((resolve, reject) => {\n    const transaction = db.transaction(\"Chats\", \"readwrite\");\n    const objectStore = transaction.objectStore(\"Chats\");\n\n    const request = objectStore.get(roomId);\n\n    request.onsuccess = (event: any) => {\n      let chatData = event.target.result as\n        | { roomId: string; messages: IMessage[] }\n        | undefined;\n      chatData = chatData || { roomId, messages: [] };\n      chatData.messages = messages;\n      const updateRequest = objectStore.put(chatData);\n\n      updateRequest.onerror = (event) => {\n        console.error(\"메시지를 저장하는 동안 오류가 발생했습니다.\");\n        reject(\"오류\");\n      };\n\n      updateRequest.onsuccess = (event) => {\n        resolve();\n      };\n    };\n\n    request.onerror = (event) => {\n      console.error(\"채팅방 데이터를 가져오는 동안 오류가 발생했습니다.\");\n      reject(\"오류\");\n    };\n  });\n};\n\n// 전체 채팅방 데이터 조회\nconst getAllChatRooms = async (): Promise<IChatRoom[]> => {\n  const db = await openDB();\n  return new Promise((resolve, reject) => {\n    const transaction = db.transaction(\"Chats\", \"readonly\");\n    const objectStore = transaction.objectStore(\"Chats\");\n    const request = objectStore.getAll();\n\n    request.onsuccess = (event: any) => {\n      const orgChatRooms = event.target.result as {\n        roomId: string;\n        messages: IMessage[];\n      }[];\n      const chatRooms = orgChatRooms\n        .map((chatRoom) => {\n          const latestMessage = _.sortBy(\n            chatRoom.messages,\n            \"timestamp\"\n          ).pop() as IMessage;\n          return {\n            roomId: chatRoom.roomId,\n            latestMessage,\n          };\n        })\n        .filter((chatRoom) => chatRoom.latestMessage);\n      resolve(chatRooms);\n    };\n\n    request.onerror = (event) => {\n      console.error(\"전체 채팅방 데이터를 가져오는 동안 오류가 발생했습니다.\");\n      reject(\"오류\");\n    };\n  });\n};\n\n// 특정 채팅방의 메시지 가져오기\nconst getMessagesByRoomId = async (roomId: string): Promise<IMessage[]> => {\n  const db = await openDB();\n  return new Promise((resolve, reject) => {\n    const transaction = db.transaction(\"Chats\", \"readonly\");\n    const objectStore = transaction.objectStore(\"Chats\");\n\n    const request = objectStore.get(roomId);\n\n    request.onsuccess = (event: any) => {\n      const chatData = event.target.result as\n        | { roomId: string; messages: IMessage[] }\n        | undefined;\n      const messages = chatData ? chatData.messages : [];\n      resolve(messages);\n    };\n\n    request.onerror = (event) => {\n      console.error(\"채팅방 데이터를 가져오는 동안 오류가 발생했습니다.\");\n      reject(\"오류\");\n    };\n  });\n};\n\n// 채팅방 삭제\nconst deleteChatRoom = async (roomId: string): Promise<void> => {\n  const db = await openDB();\n  return new Promise((resolve, reject) => {\n    const transaction = db.transaction(\"Chats\", \"readwrite\");\n    const objectStore = transaction.objectStore(\"Chats\");\n\n    const request = objectStore.delete(roomId);\n\n    request.onsuccess = (event) => {\n      resolve();\n    };\n\n    request.onerror = (event) => {\n      console.error(\"채팅방을 삭제하는 동안 오류가 발생했습니다.\");\n      reject(\"오류\");\n    };\n  });\n};\n\nexport const chatDB = {\n  saveMessages,\n  getAllChatRooms,\n  getMessagesByRoomId,\n  deleteChatRoom,\n};\n"],"names":["useCssVar","useLayoutEffect","vh","window","innerHeight","document","documentElement","style","setProperty","concat","ChatBackground","memo","_ref","children","_jsx","className","height","ChatBox","ChatContainer","ChatFooter","_jsxs","href","target","rel","Badge","ChatHeader","title","memberCount","isOpenMembers","toggleOpenMembers","onLeave","membersStyle","useMemo","onClickLeave","useCallback","confirm","src","imgChat","alt","onClick","BsPeopleFill","BiExit","useWindowSize","_useState","useState","width","innerWidth","_useState2","_slicedToArray","size","setSize","handleResize","addEventListener","removeEventListener","isSmall","ChatEditor","disabled","onSend","content","setContent","_useDevice","isMobile","test","navigator","userAgent","isDesktop","useDevice","editorRef","useRef","sendStyle","sendContent","_","onChange","e","value","onKeyDown","key","shiftKey","preventDefault","_editorRef$current","current","focus","_Fragment","TextareaAutosize","ref","minRows","maxRows","autoFocus","placeholder","PiPaperPlaneRightFill","ChatMain","initialChatState","myNickname","messages","members","chatReducer","state","action","type","_objectSpread","payload","_toConsumableArray","id","shortUUID","timestamp","Date","now","createMessage","message","ChatMessages","forwardRef","messagesRef","sortedMessages","useImperativeHandle","scrollToBottom","_messagesRef$current","scrollTo","top","scrollHeight","behavior","prevDate","prevMessage","reduce","acc","isMine","nickname","date","dayjs","format","push","ChatDateMessage","ChatMemberMessage","Math","abs","diff","ChatMessage","contentOnly","reverse","_ref2","BsCheckAll","_ref3","myMessageStyle","myMessageContentStyle","contentOnlyStyle","_ref4","enterOrLeave","ChatMembers","shortedMembers","filter","member","map","ChatMember","isMe","meStyle","Gravatar","email","default","createChatConnection","chatRoomId","ws","timer","onopen","console","log","onclose","close","setTimeout","cancel","clearTimeout","isSame","compare","isClosed","readyState","WebSocket","CLOSED","CLOSING","onWebSocketMessage","webSocketMessage","dispatch","clients","onClients","onJoin","onMessage","Chat","roomId","useParams","navigate","useNavigate","chatMessageRef","containerRef","setIsOpenMembers","_useChatStore","_useReducer","useReducer","_useReducer2","_useReducer2$","dispatchMiddleware","chatDB","saveMessages","getMessagesByRoomId","then","useChatStore","_useChatConnection","connectionRef","messageHandlerRef","_connectionRef$curren","_connectionRef$curren2","host","location","protocol","socketUrl","onmessage","event","_messageHandlerRef$cu","JSON","parse","data","call","_connectionRef$curren4","_connectionRef$curren3","registMessageHandler","handleMessage","sendMessage","_connectionRef$curren5","send","leave","_connectionRef$curren6","connection","useChatConnection","chatMainStyle","prev","onSendMessage","useEffect","prompt","alert","fetch","response","json","available","catch","error","checkNicknameAsync","_chatMessageRef$curre","_containerRef$current","scrollIntoView","block","length","openDB","Promise","resolve","reject","request","indexedDB","open","onerror","onsuccess","db","result","onupgradeneeded","createObjectStore","keyPath","createIndex","unique","_asyncToGenerator","_regeneratorRuntime","mark","_callee","wrap","_context","next","sent","abrupt","objectStore","transaction","get","chatData","updateRequest","put","stop","_x","_x2","apply","arguments","getAllChatRooms","_callee2","_context2","getAll","chatRooms","chatRoom","latestMessage","pop","_callee3","_context3","_x3","deleteChatRoom","_callee4","_context4","delete","_x4"],"sourceRoot":""}